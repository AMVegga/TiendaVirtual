<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda Virtual</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- Encabezado -->
    <header>
        <h1>Bienvenidos a MaryGadgets</h1>
        <nav>
            <ul>
                <li><a href="inicio.html">Inicio</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="contacto.html">Contacto</a></li>
                <li><a href="pago.html">Pagar</a></li>
                <li><a href="carrito.html">üõí Ver Carrito (<span id="contador-carrito">0</span>)</a></li>
                <li><a href="admin.html">üïµüèª‚Äç‚ôÇÔ∏è</a></li>
            </ul>
        </nav>
    </header>

    <!-- Banner -->
    <section id="inicio" class="banner">
        <h2>La mejor tienda en electronica, tecnologia y mas</h2>
    </section>

    <!-- Secci√≥n de productos -->

   <section id="productos" class="productos">
    <h2>√öltimos Productos Agregados</h2>
    <div class="productos-container" id="productos-container"></div>
</section>
<script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js";

    // ‚¨ÖÔ∏è Cambia esto por tus claves reales
    const supabaseUrl = "https://lnceafmmakkkiebkmfne.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxuY2VhZm1tYWtra2llYmttZm5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM1NTcyMTcsImV4cCI6MjA3OTEzMzIxN30.fH0lC-gukHznlC2zpg3qkZpzNy6U3h4HV4HdV4XuvkM";
    const supabase = createClient(supabaseUrl, supabaseKey);

    const contenedor = document.getElementById("productos-container");

    async function cargarProductos() {
        const { data: productos, error } = await supabase
            .from("productos")
            .select("*")
            .order("id", { ascending: false }); // Los √∫ltimos primero

        if (error) {
            console.error("Error cargando productos:", error);
            contenedor.innerHTML = "<p>No se pudieron cargar los productos.</p>";
            return;
        }

        contenedor.innerHTML = ""; // Limpiar

        productos.forEach(prod => {
            const div = document.createElement("div");
            div.classList.add("producto");

            div.innerHTML = `
                <img src="${prod.imagen || 'https://via.placeholder.com/150'}">
                <h3>${prod.nombre}</h3>
                <p>$${prod.precio}</p>
                <button class="agregar-carrito"
                    data-nombre="${prod.nombre}"
                    data-precio="${prod.precio}">
                    Agregar al carrito
                </button>
            `;

            contenedor.appendChild(div);
        });

        activarBotones();
    }

    function activarBotones() {
        const botones = document.querySelectorAll(".agregar-carrito");

        botones.forEach(btn => {
            btn.addEventListener("click", () => {
                alert(`A√±adido: ${btn.dataset.nombre}`);
            });
        });
    }

    cargarProductos();
</script>

    <center><button>
        
        <p>Total a pagar: <span id="total-carrito">$0.00</span></p>
        
        <form id="paypal-form" action="https://www.paypal.com/" method="post">
        <input type="hidden" name="cmd" value="_xclick">
        <input type="hidden" name="business" value="maryannv25@hotmail.com">
        <input type="hidden" name="item_name" value="Compra en Mi Tienda">
        <input type="hidden" name="amount" id="paypal-amount" value="0"> <!-- Se actualizar√° con JS -->
        <input type="hidden" name="currency_code" value="USD">
        <input type="submit" value="Pagar con PayPal">
                    
    </form>
    <script src="script.js"></script>    
    </button>
    </center>    

    <!-- Contacto -->
    <section id="contacto" class="contacto">
        <h2>Contacto</h2>
        <button><a href="mailto:contacto@MaryGadgets.com">Enviar correo a contacto@MaryGadgets.com</a></button>        
        <p>Tel√©fono: +123 456 7890</p>
    </section>

    <!-- Pie de p√°gina -->
    <footer>
        <p>&copy; 2025 MaryGadgets - Todos los derechos reservados</p>
    </footer>        
</body>
</html>
